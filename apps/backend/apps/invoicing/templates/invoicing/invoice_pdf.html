<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ document.sequence_number }}</title>
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: "Helvetica", "Arial", sans-serif;
            font-size: 10pt;
            color: #333;
            line-height: 1.4;
        }
        .header {
            margin-bottom: 20pt;
            border-bottom: 2px solid #00E585;
            padding-bottom: 10pt;
        }
        .org-name {
            font-size: 18pt;
            font-weight: bold;
            color: #000;
        }
        .document-type {
            font-size: 20pt;
            font-weight: bold;
            text-align: right;
            color: #666;
            margin-top: -25pt;
        }
        .info-section {
            margin-bottom: 20pt;
            width: 100%;
        }
        .info-box {
            vertical-align: top;
            width: 50%;
        }
        .label {
            font-weight: bold;
            color: #666;
            text-transform: uppercase;
            font-size: 8pt;
        }
        table.line-items {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20pt;
        }
        table.line-items th {
            background-color: #f5f5f5;
            border-bottom: 1px solid #ccc;
            padding: 8pt;
            text-align: left;
            font-size: 9pt;
        }
        table.line-items td {
            padding: 8pt;
            border-bottom: 1px solid #eee;
            vertical-align: top;
        }
        .text-right {
            text-align: right;
        }
        .totals-section {
            width: 40%;
            float: right;
        }
        .totals-table {
            width: 100%;
            border-collapse: collapse;
        }
        .totals-table td {
            padding: 4pt 8pt;
        }
        .grand-total {
            background-color: #00E585;
            color: #000;
            font-weight: bold;
            font-size: 12pt;
        }
        .footer {
            margin-top: 50pt;
            font-size: 8pt;
            color: #999;
            text-align: center;
            border-top: 1px solid #eee;
            padding-top: 10pt;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="org-name">{{ org.name }}</div>
        <div class="document-type">
            {% if document.document_type == 'SALES_INVOICE' and org.gst_registered %}
                TAX INVOICE
            {% else %}
                {{ document.document_type }}
            {% endif %}
        </div>
        <div class="org-info">
            {{ org.address_line_1 }}<br>
            {% if org.address_line_2 %}{{ org.address_line_2 }}<br>{% endif %}
            {{ org.city }} {{ org.postal_code }}<br>
            UEN: {{ org.uen }}<br>
            {% if org.gst_registered %}GST Reg No: {{ org.gst_reg_number }}{% endif %}
        </div>
    </div>

    <table class="info-section">
        <tr>
            <td class="info-box">
                <div class="label">Bill To</div>
                <div style="font-weight: bold; font-size: 11pt;">{{ contact.name }}</div>
                {% if contact.company_name %}{{ contact.company_name }}<br>{% endif %}
                {{ contact.address_line_1|default:"" }}<br>
                {{ contact.city|default:"" }} {{ contact.postal_code|default:"" }}
            </td>
            <td class="info-box text-right">
                <div class="label">Number</div>
                <div style="font-weight: bold;">{{ document.sequence_number }}</div>
                <div class="label" style="margin-top: 10pt;">Date</div>
                <div>{{ document.issue_date }}</div>
                {% if document.due_date %}
                <div class="label" style="margin-top: 10pt;">Due Date</div>
                <div>{{ document.due_date }}</div>
                {% endif %}
            </td>
        </tr>
    </table>

    <table class="line-items">
        <thead>
            <tr>
                <th>Description</th>
                <th class="text-right">Qty</th>
                <th class="text-right">Unit Price</th>
                <th class="text-right">Tax</th>
                <th class="text-right">Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for line in lines %}
            <tr>
                <td>{{ line.description }}</td>
                <td class="text-right">{{ line.quantity }}</td>
                <td class="text-right">{{ line.unit_price }}</td>
                <td class="text-right">{{ line.tax_code.code }}</td>
                <td class="text-right">{{ line.total_amount }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="width: 100%; overflow: hidden;">
        <div class="totals-section">
            <table class="totals-table">
                <tr>
                    <td>Subtotal (Excl. GST)</td>
                    <td class="text-right">{{ document.total_excl }}</td>
                </tr>
                {% if document.gst_total > 0 %}
                <tr>
                    <td>GST Total</td>
                    <td class="text-right">{{ document.gst_total }}</td>
                </tr>
                {% endif %}
                {% if document.bcrs_deposit_total > 0 %}
                <tr>
                    <td>BCRS Deposit (Exempt)</td>
                    <td class="text-right">{{ document.bcrs_deposit_total }}</td>
                </tr>
                {% endif %}
                <tr class="grand-total">
                    <td>TOTAL ({{ org.base_currency }})</td>
                    <td class="text-right">{{ document.total_incl }}</td>
                </tr>
            </table>
        </div>
    </div>

    {% if document.notes %}
    <div style="margin-top: 20pt;">
        <div class="label">Notes</div>
        <div style="font-size: 9pt;">{{ document.notes }}</div>
    </div>
    {% endif %}

    <div class="footer">
        Generated by LedgerSG â€” Singapore's Neo-Brutalist Accounting Platform<br>
        This is a computer-generated document. No signature is required.
    </div>
</body>
</html>
